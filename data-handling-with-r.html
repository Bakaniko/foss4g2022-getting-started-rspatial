<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 1 Data handling with R | Getting started with R and R-spatial</title>
  <meta name="description" content="Teaching materials for R and R-spatial introduction workshop at FOSS4G2022." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 1 Data handling with R | Getting started with R and R-spatial" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Teaching materials for R and R-spatial introduction workshop at FOSS4G2022." />
  <meta name="github-repo" content="Bakaniko/foss4g2022-getting-started-rspatial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 1 Data handling with R | Getting started with R and R-spatial" />
  
  <meta name="twitter:description" content="Teaching materials for R and R-spatial introduction workshop at FOSS4G2022." />
  

<meta name="author" content="Nicolas Roelandt and Jakub Nowosad" />


<meta name="date" content="2022-08-01" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="introduction.html"/>
<link rel="next" href="rspatial.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<script src="libs/leaflet-graticule-0.1.0/L.Graticule.js"></script>
<script src="libs/leaflet-graticule-0.1.0/Graticule-binding.js"></script>
<link href="libs/leaflet-minimap-3.3.1/Control.MiniMap.min.css" rel="stylesheet" />
<script src="libs/leaflet-minimap-3.3.1/Control.MiniMap.min.js"></script>
<script src="libs/leaflet-minimap-3.3.1/Minimap-binding.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Getting started with R and R-spatial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#what-is-love-r"><i class="fa fa-check"></i>What is <del>love</del> R ?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#why-an-r-workshop-in-a-foss4g-conference"><i class="fa fa-check"></i>Why an R workshop in a FOSS4G conference ?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#coding-paradigms"><i class="fa fa-check"></i>Coding paradigms</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html"><i class="fa fa-check"></i><b>1</b> Data handling with R</a><ul>
<li class="chapter" data-level="1.1" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#data-types"><i class="fa fa-check"></i><b>1.1</b> Data types</a></li>
<li class="chapter" data-level="1.2" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#assignment"><i class="fa fa-check"></i><b>1.2</b> Assignment</a></li>
<li class="chapter" data-level="1.3" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#not-only-a-calculator"><i class="fa fa-check"></i><b>1.3</b> Not only a calculator</a></li>
<li class="chapter" data-level="1.4" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#packages"><i class="fa fa-check"></i><b>1.4</b> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#load-data"><i class="fa fa-check"></i><b>1.5</b> Load data</a></li>
<li class="chapter" data-level="1.6" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#in-the-beginning-was-the-verb"><i class="fa fa-check"></i><b>1.6</b> In the beginning was the Verb</a></li>
<li class="chapter" data-level="1.7" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#filter-data"><i class="fa fa-check"></i><b>1.7</b> Filter data</a><ul>
<li class="chapter" data-level="" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#exercice"><i class="fa fa-check"></i>Exercice</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#select-columns"><i class="fa fa-check"></i><b>1.8</b> Select columns</a></li>
<li class="chapter" data-level="1.9" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#create-new-variables"><i class="fa fa-check"></i><b>1.9</b> Create new variables</a></li>
<li class="chapter" data-level="1.10" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#agregate-data"><i class="fa fa-check"></i><b>1.10</b> Agregate data</a></li>
<li class="chapter" data-level="1.11" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#join-data"><i class="fa fa-check"></i><b>1.11</b> Join data</a></li>
<li class="chapter" data-level="1.12" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#piping"><i class="fa fa-check"></i><b>1.12</b> Piping</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rspatial.html"><a href="rspatial.html"><i class="fa fa-check"></i><b>2</b> Introduction to the R-spatial ecosystem</a><ul>
<li class="chapter" data-level="2.1" data-path="rspatial.html"><a href="rspatial.html#rs-spatial-ecosystems"><i class="fa fa-check"></i><b>2.1</b> R’s spatial ecosystem(s)</a></li>
<li class="chapter" data-level="2.2" data-path="rspatial.html"><a href="rspatial.html#vector-data"><i class="fa fa-check"></i><b>2.2</b> Vector data</a></li>
<li class="chapter" data-level="2.3" data-path="rspatial.html"><a href="rspatial.html#raster-data"><i class="fa fa-check"></i><b>2.3</b> Raster data</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html"><i class="fa fa-check"></i><b>3</b> Making maps in R</a><ul>
<li class="chapter" data-level="3.1" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#mapping-tools-in-r"><i class="fa fa-check"></i><b>3.1</b> Mapping tools in R</a></li>
<li class="chapter" data-level="3.2" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#basic-example"><i class="fa fa-check"></i><b>3.2</b> Basic example</a></li>
<li class="chapter" data-level="3.3" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#shapes-and-layers"><i class="fa fa-check"></i><b>3.3</b> Shapes and layers</a></li>
<li class="chapter" data-level="3.4" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#attributes-layers"><i class="fa fa-check"></i><b>3.4</b> Attributes layers</a></li>
<li class="chapter" data-level="3.5" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#other-map-elements"><i class="fa fa-check"></i><b>3.5</b> Other map elements</a></li>
<li class="chapter" data-level="3.6" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#interactive-mode"><i class="fa fa-check"></i><b>3.6</b> Interactive mode</a></li>
<li class="chapter" data-level="3.7" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#saving-maps"><i class="fa fa-check"></i><b>3.7</b> Saving maps</a></li>
<li class="chapter" data-level="3.8" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#what-else"><i class="fa fa-check"></i><b>3.8</b> What else?</a></li>
<li class="chapter" data-level="3.9" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#more-resources"><i class="fa fa-check"></i><b>3.9</b> More resources</a></li>
<li class="chapter" data-level="3.10" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#exercises"><i class="fa fa-check"></i><b>3.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html"><i class="fa fa-check"></i><b>4</b> Manipulating vector data</a><ul>
<li class="chapter" data-level="4.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#read-spatial-data"><i class="fa fa-check"></i><b>4.1</b> Read spatial data</a><ul>
<li class="chapter" data-level="4.1.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#cycle-hire-dataset"><i class="fa fa-check"></i><b>4.1.1</b> Cycle hire dataset</a></li>
<li class="chapter" data-level="4.1.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#boroughs-of-london"><i class="fa fa-check"></i><b>4.1.2</b> Boroughs of London</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#reprojection"><i class="fa fa-check"></i><b>4.2</b> Reprojection</a></li>
<li class="chapter" data-level="4.3" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#joins"><i class="fa fa-check"></i><b>4.3</b> Joins</a><ul>
<li class="chapter" data-level="4.3.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#join-by-attributes"><i class="fa fa-check"></i><b>4.3.1</b> Join by attributes</a></li>
<li class="chapter" data-level="4.3.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#spatial-join"><i class="fa fa-check"></i><b>4.3.2</b> Spatial join</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#aggregation"><i class="fa fa-check"></i><b>4.4</b> Aggregation</a><ul>
<li class="chapter" data-level="4.4.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#count"><i class="fa fa-check"></i><b>4.4.1</b> Count</a></li>
<li class="chapter" data-level="4.4.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#sum"><i class="fa fa-check"></i><b>4.4.2</b> Sum</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#centroids"><i class="fa fa-check"></i><b>4.5</b> Centroids</a></li>
<li class="chapter" data-level="4.6" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#geometric-binary-predicates"><i class="fa fa-check"></i><b>4.6</b> Geometric binary predicates</a></li>
<li class="chapter" data-level="4.7" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#saving-results"><i class="fa fa-check"></i><b>4.7</b> Saving results</a><ul>
<li class="chapter" data-level="4.7.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#writing-data"><i class="fa fa-check"></i><b>4.7.1</b> Writing data</a></li>
<li class="chapter" data-level="4.7.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#check-data"><i class="fa fa-check"></i><b>4.7.2</b> Check data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html"><i class="fa fa-check"></i><b>5</b> Manipulating raster data</a><ul>
<li class="chapter" data-level="5.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#example-data"><i class="fa fa-check"></i><b>5.1</b> Example data</a></li>
<li class="chapter" data-level="5.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#map-algebra"><i class="fa fa-check"></i><b>5.2</b> Map algebra</a><ul>
<li class="chapter" data-level="5.2.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#local-operations"><i class="fa fa-check"></i><b>5.2.1</b> Local operations</a></li>
<li class="chapter" data-level="5.2.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#focal-operations"><i class="fa fa-check"></i><b>5.2.2</b> Focal operations</a></li>
<li class="chapter" data-level="5.2.3" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#zonal-operations"><i class="fa fa-check"></i><b>5.2.3</b> Zonal operations</a></li>
<li class="chapter" data-level="5.2.4" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#global-operations"><i class="fa fa-check"></i><b>5.2.4</b> Global operations</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#transformations"><i class="fa fa-check"></i><b>5.3</b> Transformations</a><ul>
<li class="chapter" data-level="5.3.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#resampling"><i class="fa fa-check"></i><b>5.3.1</b> Resampling</a></li>
<li class="chapter" data-level="5.3.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#reprojecting"><i class="fa fa-check"></i><b>5.3.2</b> Reprojecting</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-vector-interactions"><i class="fa fa-check"></i><b>5.4</b> Raster-vector interactions</a><ul>
<li class="chapter" data-level="5.4.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-cropping-and-masking"><i class="fa fa-check"></i><b>5.4.1</b> Raster cropping and masking</a></li>
<li class="chapter" data-level="5.4.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-extraction"><i class="fa fa-check"></i><b>5.4.2</b> Raster extraction</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-analysis"><i class="fa fa-check"></i><b>5.5</b> Raster analysis</a><ul>
<li class="chapter" data-level="5.5.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#predictions"><i class="fa fa-check"></i><b>5.5.1</b> Predictions</a></li>
<li class="chapter" data-level="5.5.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#segmentations"><i class="fa fa-check"></i><b>5.5.2</b> Segmentations</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-writing"><i class="fa fa-check"></i><b>5.6</b> Raster writing</a></li>
<li class="chapter" data-level="5.7" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#exercises-1"><i class="fa fa-check"></i><b>5.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://roelandtn.frama.io/" target="blank">Nicolas Roelandt</a></li>
<li><a href="https://jakubnowosad.com/" target="blank">Jakub Nowosad</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Getting started with R and R-spatial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="data-handling-with-r" class="section level1 hasAnchor">
<h1><span class="header-section-number">Chapter 1</span> Data handling with R<a href="data-handling-with-r.html#data-handling-with-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!-- (Nicolas) Non-spatial data handling (30 min) -->
<div id="data-types" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.1</span> Data types<a href="data-handling-with-r.html#data-types" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>numeric:</li>
<li><code>2</code></li>
<li><code>12.125</code></li>
<li>character strings: <code>'a'</code>, <code>"word"</code></li>
<li>logical:
<ul>
<li><code>TRUE</code></li>
<li><code>FALSE</code></li>
<li><code>NULL</code> (sort of)</li>
</ul></li>
</ul>
<blockquote>
<p>Please note that logicals are in capital letters.</p>
</blockquote>
<ul>
<li>vectors:
<ul>
<li><code>c(12, 15, 35698)</code></li>
<li><code>c("FOSS4G 2022", "Firenze")</code></li>
</ul></li>
<li>list: <code>list(1, 45, 12.0, "toto")</code></li>
<li>matrices: <code>matrix(0:9, 3,3)</code></li>
<li>data frames (df): <code>data.frame(x = 1:3, y = c("a", "b", "c"))</code></li>
<li>constants:
<ul>
<li><code>letters[3:4]</code></li>
<li><code>LETTERS[12:26]</code></li>
<li><code>pi</code></li>
</ul></li>
</ul>
</div>
<div id="assignment" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.2</span> Assignment<a href="data-handling-with-r.html#assignment" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--jn: what do you mean by "affectation"? 
It is French for assignment ;)-->
<p>Use of variables to store data in memory.</p>
<p>Use <code>&lt;-</code> (or <code>=</code>)</p>
<p>Examples:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="data-handling-with-r.html#cb2-1"></a>a &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1</span>, <span class="dv">2</span>) <span class="co"># new integer vector</span></span>
<span id="cb2-2"><a href="data-handling-with-r.html#cb2-2"></a>b &lt;-<span class="st"> </span><span class="kw">c</span>(<span class="st">&quot;FOSS4G&quot;</span>, <span class="st">&quot;2022&quot;</span>, <span class="st">&quot;Firenze&quot;</span>) <span class="co"># new character vector</span></span>
<span id="cb2-3"><a href="data-handling-with-r.html#cb2-3"></a>c &lt;-<span class="st"> </span><span class="kw">data.frame</span>(</span>
<span id="cb2-4"><a href="data-handling-with-r.html#cb2-4"></a>  <span class="dt">number =</span> a, </span>
<span id="cb2-5"><a href="data-handling-with-r.html#cb2-5"></a>  <span class="dt">strings =</span> b)</span>
<span id="cb2-6"><a href="data-handling-with-r.html#cb2-6"></a>d &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="dv">1</span>, <span class="dv">45</span>, <span class="fl">12.0</span>, <span class="st">&quot;toto&quot;</span>) <span class="co"># lists can store different data types</span></span>
<span id="cb2-7"><a href="data-handling-with-r.html#cb2-7"></a>e =<span class="st"> </span><span class="kw">matrix</span>(<span class="dv">0</span><span class="op">:</span><span class="dv">9</span>, <span class="dv">3</span>,<span class="dv">3</span>)</span></code></pre></div>
</div>
<div id="not-only-a-calculator" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.3</span> Not only a calculator<a href="data-handling-with-r.html#not-only-a-calculator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R is shipped with lots of functions like :</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="data-handling-with-r.html#cb3-1"></a><span class="kw">data</span>(<span class="op">&lt;</span>datasetname<span class="op">&gt;</span>)   <span class="co"># load an embedded dataset</span></span>
<span id="cb3-2"><a href="data-handling-with-r.html#cb3-2"></a><span class="kw">head</span>(<span class="op">&lt;</span>objectname<span class="op">&gt;</span>)    <span class="co"># first lines of a dataframe</span></span>
<span id="cb3-3"><a href="data-handling-with-r.html#cb3-3"></a><span class="kw">is.vector</span>(object)     <span class="co"># return TRUE if object is a vector</span></span>
<span id="cb3-4"><a href="data-handling-with-r.html#cb3-4"></a><span class="kw">is.data.frame</span>(object) <span class="co"># return TRUE if object is a data.frame</span></span>
<span id="cb3-5"><a href="data-handling-with-r.html#cb3-5"></a><span class="kw">class</span>(<span class="op">&lt;</span>objectname<span class="op">&gt;</span>)  <span class="co"># Returns the class of an object</span></span>
<span id="cb3-6"><a href="data-handling-with-r.html#cb3-6"></a><span class="kw">unique</span>(<span class="op">&lt;</span>objectname<span class="op">&gt;</span>) <span class="co"># returns unique values</span></span>
<span id="cb3-7"><a href="data-handling-with-r.html#cb3-7"></a><span class="kw">help</span>(<span class="op">&lt;</span>functionname<span class="op">&gt;</span>)  <span class="co"># get help on a function</span></span>
<span id="cb3-8"><a href="data-handling-with-r.html#cb3-8"></a><span class="kw">plot</span>(<span class="op">&lt;</span>objectname<span class="op">&gt;</span>)   <span class="co"># create a graphic from a dataset</span></span></code></pre></div>
<p>Exercises :</p>
<ul>
<li>Load the <code>LakeHuron</code> dataset using <code>data()</code></li>
<li>Get help on the <code>LakeHuron</code> dataset</li>
<li>Use <code>head()</code> to see its first lines</li>
<li>Plot <code>LakeHuron</code></li>
</ul>
</div>
<div id="packages" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.4</span> Packages<a href="data-handling-with-r.html#packages" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>While base R contains a lot of functions, it can be extended with packages.</p>
<blockquote>
<p>In R, the fundamental unit of shareable code is the package. A package bundles together code, data, documentation, and tests, and is easy to share with others. <span class="citation">Wickham and Bryan (<a href="#ref-wickham2022Packages" role="doc-biblioref">2022</a>)</span></p>
</blockquote>
<p>You already saw how to install packages with the <code>install.packages()</code> function, let’s see how to load the <a href="https://dplyr.tidyverse.org/">{dplyr}</a>
package we will use to handle the data.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="data-handling-with-r.html#cb4-1"></a><span class="kw">library</span>(dplyr)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
</div>
<div id="load-data" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.5</span> Load data<a href="data-handling-with-r.html#load-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If the packages do not provide datasets to work with, you will want to work on your own data.
There is several ways to load data.</p>
<p>Base R provides a set of functions for delimited text files.
For example, if we want to work with the Gapminder dataset from <a href="https://github.com/swcarpentry/r-novice-gapminder">Software Carpentry’s R course</a>.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="data-handling-with-r.html#cb8-1"></a>data_url &lt;-<span class="st"> &quot;https://raw.githubusercontent.com/swcarpentry/r-novice-gapminder/main/data/gapminder_data.csv&quot;</span></span>
<span id="cb8-2"><a href="data-handling-with-r.html#cb8-2"></a></span>
<span id="cb8-3"><a href="data-handling-with-r.html#cb8-3"></a><span class="co"># download the data and store it in a variable</span></span>
<span id="cb8-4"><a href="data-handling-with-r.html#cb8-4"></a>gapminder &lt;-<span class="st"> </span><span class="kw">read.csv</span>(data_url)</span></code></pre></div>
<p>We call this dataset from an URL but it can be a path in your system file.</p>
<p>For example, if you have installed the gapminder package as recommended, you will find the data set as a TSV file in your R installation.</p>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="data-handling-with-r.html#cb9-1"></a>data_url &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;extdata/gapminder.tsv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;gapminder&quot;</span>)</span>
<span id="cb9-2"><a href="data-handling-with-r.html#cb9-2"></a>data_url</span></code></pre></div>
<pre><code>## [1] &quot;/Users/runner/work/_temp/Library/gapminder/extdata/gapminder.tsv&quot;</code></pre>
<div class="infobox tip">
<p><code>system.file()</code> is a function that the path of files in R packages, independently
of the operating system.</p>
</div>
<div class="sourceCode" id="cb11"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb11-1"><a href="data-handling-with-r.html#cb11-1"></a>gapminder &lt;-<span class="st"> </span><span class="kw">read.delim</span>(data_url, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>)</span></code></pre></div>
<div class="infobox tip">
<p><code>read.csv()</code> and similar functions can read delimited text files only.
For other formats, you can use functions from other packages like <a href="https://haven.tidyverse.org">Haven</a> or <a href="https://readxl.tidyverse.org/">readxl</a>.
We will show in Chapter <a href="rspatial.html#rspatial">2</a> how to load geospatial data.</p>
</div>
<p>Let’s take a look to our data :</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="data-handling-with-r.html#cb12-1"></a><span class="kw">glimpse</span>(gapminder)</span></code></pre></div>
<pre><code>## Rows: 1,704
## Columns: 6
## $ country   &lt;chr&gt; &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, &quot;Afghanistan&quot;, …
## $ year      &lt;int&gt; 1952, 1957, 1962, 1967, 1972, 1977, 1982, 1987, 1992, 1997, …
## $ pop       &lt;dbl&gt; 8425333, 9240934, 10267083, 11537966, 13079460, 14880372, 12…
## $ continent &lt;chr&gt; &quot;Asia&quot;, &quot;Asia&quot;, &quot;Asia&quot;, &quot;Asia&quot;, &quot;Asia&quot;, &quot;Asia&quot;, &quot;Asia&quot;, &quot;Asi…
## $ lifeExp   &lt;dbl&gt; 28.801, 30.332, 31.997, 34.020, 36.088, 38.438, 39.854, 40.8…
## $ gdpPercap &lt;dbl&gt; 779.4453, 820.8530, 853.1007, 836.1971, 739.9811, 786.1134, …</code></pre>
<p>This dataset is about life expectancy, population and GDP per capita in world countries between 1952 and 2007.</p>
<p>You can also use <code>head()</code> for the same purpose but a different output format.</p>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="data-handling-with-r.html#cb14-1"></a><span class="kw">head</span>(gapminder)</span></code></pre></div>
<pre><code>##       country year      pop continent lifeExp gdpPercap
## 1 Afghanistan 1952  8425333      Asia  28.801  779.4453
## 2 Afghanistan 1957  9240934      Asia  30.332  820.8530
## 3 Afghanistan 1962 10267083      Asia  31.997  853.1007
## 4 Afghanistan 1967 11537966      Asia  34.020  836.1971
## 5 Afghanistan 1972 13079460      Asia  36.088  739.9811
## 6 Afghanistan 1977 14880372      Asia  38.438  786.1134</code></pre>
<p>We can transform a dataframe into a tibble to access their better <code>print()</code> method that combines <code>head()</code> and <code>glimpse()</code>.
Tibbles are at the core of the Tidyverse packages.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="data-handling-with-r.html#cb16-1"></a>gapminder &lt;-<span class="st"> </span><span class="kw">as_tibble</span>(gapminder)</span>
<span id="cb16-2"><a href="data-handling-with-r.html#cb16-2"></a>gapminder</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 6
##    country      year      pop continent lifeExp gdpPercap
##    &lt;chr&gt;       &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanistan  1952  8425333 Asia         28.8      779.
##  2 Afghanistan  1957  9240934 Asia         30.3      821.
##  3 Afghanistan  1962 10267083 Asia         32.0      853.
##  4 Afghanistan  1967 11537966 Asia         34.0      836.
##  5 Afghanistan  1972 13079460 Asia         36.1      740.
##  6 Afghanistan  1977 14880372 Asia         38.4      786.
##  7 Afghanistan  1982 12881816 Asia         39.9      978.
##  8 Afghanistan  1987 13867957 Asia         40.8      852.
##  9 Afghanistan  1992 16317921 Asia         41.7      649.
## 10 Afghanistan  1997 22227415 Asia         41.8      635.
## # … with 1,694 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<div class="infobox note">
<p>If you want more information about the <code>gapminder</code> dataset, Hans Rosling made a <a href="https://www.ted.com/talks/hans_rosling_the_best_stats_you_ve_ever_seen">TED talk</a> presenting the gapminder data.</p>
</div>
<p>We can see that it contains several columns (also called <em>variables</em>):</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="data-handling-with-r.html#cb18-1"></a><span class="kw">names</span>(gapminder)</span></code></pre></div>
<pre><code>## [1] &quot;country&quot;   &quot;year&quot;      &quot;pop&quot;       &quot;continent&quot; &quot;lifeExp&quot;   &quot;gdpPercap&quot;</code></pre>
</div>
<div id="in-the-beginning-was-the-verb" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.6</span> In the beginning was the Verb<a href="data-handling-with-r.html#in-the-beginning-was-the-verb" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>{dplyr} provides a lot of functions to handle data: <code>filter()</code> to filter the data matching certain conditions (subset data), <code>select()</code> to select columns, <code>mutate()</code> to create new variables.
All those functions are verbs and means an action onto the dataset.</p>
</div>
<div id="filter-data" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.7</span> Filter data<a href="data-handling-with-r.html#filter-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>If we only want the records from Italy, we can filter using:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="data-handling-with-r.html#cb20-1"></a><span class="kw">filter</span>(gapminder, country <span class="op">==</span><span class="st"> &quot;Italy&quot;</span> )</span></code></pre></div>
<pre><code>## # A tibble: 12 × 6
##    country  year      pop continent lifeExp gdpPercap
##    &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
##  1 Italy    1952 47666000 Europe       65.9     4931.
##  2 Italy    1957 49182000 Europe       67.8     6249.
##  3 Italy    1962 50843200 Europe       69.2     8244.
##  4 Italy    1967 52667100 Europe       71.1    10022.
##  5 Italy    1972 54365564 Europe       72.2    12269.
##  6 Italy    1977 56059245 Europe       73.5    14256.
##  7 Italy    1982 56535636 Europe       75.0    16537.
##  8 Italy    1987 56729703 Europe       76.4    19207.
##  9 Italy    1992 56840847 Europe       77.4    22014.
## 10 Italy    1997 57479469 Europe       78.8    24675.
## 11 Italy    2002 57926999 Europe       80.2    27968.
## 12 Italy    2007 58147733 Europe       80.5    28570.</code></pre>
<p>You can use comparison operators like <code>==</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code> , etc.
There is also logical operators : <code>&amp;</code> (<em>AND</em>), <code>|</code> (<em>OR</em>), <code>!</code> (<em>NOT</em>) and <code>xor()</code>.</p>
<p>So, for example, if we want to subset records for Italy after 2000, we can use filter like this:</p>
<div class="sourceCode" id="cb22"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb22-1"><a href="data-handling-with-r.html#cb22-1"></a>italy_<span class="dv">2000</span> &lt;-<span class="st"> </span><span class="kw">filter</span>(gapminder, country <span class="op">==</span><span class="st"> &quot;Italy&quot;</span> <span class="op">&amp;</span><span class="st"> </span>year <span class="op">&gt;</span><span class="st"> </span><span class="dv">2000</span> )</span>
<span id="cb22-2"><a href="data-handling-with-r.html#cb22-2"></a>italy_<span class="dv">2000</span></span></code></pre></div>
<pre><code>## # A tibble: 2 × 6
##   country  year      pop continent lifeExp gdpPercap
##   &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;
## 1 Italy    2002 57926999 Europe       80.2    27968.
## 2 Italy    2007 58147733 Europe       80.5    28570.</code></pre>
<div id="exercice" class="section level3 unnumbered hasAnchor">
<h3>Exercice<a href="data-handling-with-r.html#exercice" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li>Try to subset non-European records</li>
<li>Try to subset records that are in Oceania or before 2000</li>
</ul>
</div>
</div>
<div id="select-columns" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.8</span> Select columns<a href="data-handling-with-r.html#select-columns" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>select()</code> allows you to keep only the columns you need for your analysis.</p>
<p>Maybe we only want the <code>country</code>, <code>year</code> and <code>lifeExp</code> variables:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb24-1"><a href="data-handling-with-r.html#cb24-1"></a><span class="kw">select</span>(italy_<span class="dv">2000</span>, country, year, lifeExp)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   country  year lifeExp
##   &lt;chr&gt;   &lt;int&gt;   &lt;dbl&gt;
## 1 Italy    2002    80.2
## 2 Italy    2007    80.5</code></pre>
<p>Or, for example, in the <code>italy_2000</code> subset, the <code>continent</code> variable does not provide useful information anymore, so we want to discard it.
Please not the use of the <code>-</code> symbol before the name of the variable.</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="data-handling-with-r.html#cb26-1"></a><span class="kw">select</span>(italy_<span class="dv">2000</span>, <span class="op">-</span>continent)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 5
##   country  year      pop lifeExp gdpPercap
##   &lt;chr&gt;   &lt;int&gt;    &lt;dbl&gt;   &lt;dbl&gt;     &lt;dbl&gt;
## 1 Italy    2002 57926999    80.2    27968.
## 2 Italy    2007 58147733    80.5    28570.</code></pre>
<p>So you can select the column you want to keep or the ones you want to remove.</p>
</div>
<div id="create-new-variables" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.9</span> Create new variables<a href="data-handling-with-r.html#create-new-variables" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Let say you want to compute the GDP, in millions, from the population and the GDP per capita.
For that, you can use the <code>mutate()</code> function:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="data-handling-with-r.html#cb28-1"></a><span class="kw">mutate</span>(gapminder, <span class="dt">GPD =</span> (gdpPercap <span class="op">*</span><span class="st"> </span>pop)<span class="op">/</span><span class="st"> </span><span class="dv">1000000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 7
##    country      year      pop continent lifeExp gdpPercap    GPD
##    &lt;chr&gt;       &lt;int&gt;    &lt;dbl&gt; &lt;chr&gt;       &lt;dbl&gt;     &lt;dbl&gt;  &lt;dbl&gt;
##  1 Afghanistan  1952  8425333 Asia         28.8      779.  6567.
##  2 Afghanistan  1957  9240934 Asia         30.3      821.  7585.
##  3 Afghanistan  1962 10267083 Asia         32.0      853.  8759.
##  4 Afghanistan  1967 11537966 Asia         34.0      836.  9648.
##  5 Afghanistan  1972 13079460 Asia         36.1      740.  9679.
##  6 Afghanistan  1977 14880372 Asia         38.4      786. 11698.
##  7 Afghanistan  1982 12881816 Asia         39.9      978. 12599.
##  8 Afghanistan  1987 13867957 Asia         40.8      852. 11821.
##  9 Afghanistan  1992 16317921 Asia         41.7      649. 10596.
## 10 Afghanistan  1997 22227415 Asia         41.8      635. 14122.
## # … with 1,694 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>It’s companion function, <code>transmute()</code> does the same thing but only keep the new variables.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="data-handling-with-r.html#cb30-1"></a><span class="kw">transmute</span>(gapminder, <span class="dt">GPD =</span> (gdpPercap <span class="op">*</span><span class="st"> </span>pop)<span class="op">/</span><span class="st"> </span><span class="dv">1000000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 1
##       GPD
##     &lt;dbl&gt;
##  1  6567.
##  2  7585.
##  3  8759.
##  4  9648.
##  5  9679.
##  6 11698.
##  7 12599.
##  8 11821.
##  9 10596.
## 10 14122.
## # … with 1,694 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>If you want to keep variables from the dataset, you can call them in the function call:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="data-handling-with-r.html#cb32-1"></a><span class="kw">transmute</span>(gapminder, country, year, <span class="dt">GPD =</span> (gdpPercap <span class="op">*</span><span class="st"> </span>pop)<span class="op">/</span><span class="st"> </span><span class="dv">1000000</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 3
##    country      year    GPD
##    &lt;chr&gt;       &lt;int&gt;  &lt;dbl&gt;
##  1 Afghanistan  1952  6567.
##  2 Afghanistan  1957  7585.
##  3 Afghanistan  1962  8759.
##  4 Afghanistan  1967  9648.
##  5 Afghanistan  1972  9679.
##  6 Afghanistan  1977 11698.
##  7 Afghanistan  1982 12599.
##  8 Afghanistan  1987 11821.
##  9 Afghanistan  1992 10596.
## 10 Afghanistan  1997 14122.
## # … with 1,694 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>So in this example, we compute the GPD but we also keep the information about the country and the year.</p>
</div>
<div id="agregate-data" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.10</span> Agregate data<a href="data-handling-with-r.html#agregate-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Sometimes, we have a too detailed dataset and we want a more broader view of the data so we want to aggregate it.</p>
<p>To do so, <code>dplyr</code> provides a couple of functions: <code>group_by()</code> and <code>summarise()</code>.
Like their names says, <code>group_by()</code> groups records who share the same value in a variable and <code>summarise()</code> compute the summary of non-grouping variables.</p>
<p>For example, let’s compute the yearly population of each continent.
To do this, we first group the data by continent and year and pass the result to <code>summarise()</code>.
Into this second function, we create a new variable called <code>population</code> that is the sum of the variable <code>pop</code> of each group.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="data-handling-with-r.html#cb34-1"></a><span class="kw">summarise</span>(<span class="kw">group_by</span>(gapminder, continent, year), <span class="dt">population =</span> <span class="kw">sum</span>(pop))</span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;continent&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 60 × 3
## # Groups:   continent [5]
##    continent  year population
##    &lt;chr&gt;     &lt;int&gt;      &lt;dbl&gt;
##  1 Africa     1952  237640501
##  2 Africa     1957  264837738
##  3 Africa     1962  296516865
##  4 Africa     1967  335289489
##  5 Africa     1972  379879541
##  6 Africa     1977  433061021
##  7 Africa     1982  499348587
##  8 Africa     1987  574834110
##  9 Africa     1992  659081517
## 10 Africa     1997  743832984
## # … with 50 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>You can use any function to summarise your data, for example, if you want to know the number of entries by continent, you can use <code>n()</code>.</p>
<div class="sourceCode" id="cb37"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb37-1"><a href="data-handling-with-r.html#cb37-1"></a><span class="kw">summarise</span>(<span class="kw">group_by</span>(gapminder, continent), <span class="dt">count =</span> <span class="kw">n</span>())</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   continent count
##   &lt;chr&gt;     &lt;int&gt;
## 1 Africa      624
## 2 Americas    300
## 3 Asia        396
## 4 Europe      360
## 5 Oceania      24</code></pre>
<p>Or if you only want the first country of each continent:</p>
<div class="sourceCode" id="cb39"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb39-1"><a href="data-handling-with-r.html#cb39-1"></a><span class="kw">summarise</span>(<span class="kw">group_by</span>(gapminder, continent), <span class="dt">country =</span> <span class="kw">first</span>(.data[[<span class="st">&quot;country&quot;</span>]]))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 2
##   continent country    
##   &lt;chr&gt;     &lt;chr&gt;      
## 1 Africa    Algeria    
## 2 Americas  Argentina  
## 3 Asia      Afghanistan
## 4 Europe    Albania    
## 5 Oceania   Australia</code></pre>
<div class="infobox note">
<p><code>.data</code> is a pronoun that you can use when the column name is a character vector.</p>
</div>
</div>
<div id="join-data" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.11</span> Join data<a href="data-handling-with-r.html#join-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><code>dplyr</code> provides a large variety of functions to join datasets :
<code>inner_join()</code>,<code>left_join()</code>, <code>right_join()</code>, <code>full_join()</code>, <code>nest_join()</code> ,
<code>semi_join()</code>,<code>anti_join()</code>.</p>
<p>Let’s create two datasets that shares a common key.</p>
<div class="sourceCode" id="cb41"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb41-1"><a href="data-handling-with-r.html#cb41-1"></a>gapminder_left &lt;-<span class="st"> </span><span class="kw">transmute</span>(gapminder, </span>
<span id="cb41-2"><a href="data-handling-with-r.html#cb41-2"></a>                            <span class="dt">key =</span> <span class="kw">paste0</span>(country, <span class="st">&quot;_&quot;</span> , year), </span>
<span id="cb41-3"><a href="data-handling-with-r.html#cb41-3"></a>                            country, </span>
<span id="cb41-4"><a href="data-handling-with-r.html#cb41-4"></a>                            continent, </span>
<span id="cb41-5"><a href="data-handling-with-r.html#cb41-5"></a>                            year)</span>
<span id="cb41-6"><a href="data-handling-with-r.html#cb41-6"></a>gapminder_left</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 4
##    key              country     continent  year
##    &lt;chr&gt;            &lt;chr&gt;       &lt;chr&gt;     &lt;int&gt;
##  1 Afghanistan_1952 Afghanistan Asia       1952
##  2 Afghanistan_1957 Afghanistan Asia       1957
##  3 Afghanistan_1962 Afghanistan Asia       1962
##  4 Afghanistan_1967 Afghanistan Asia       1967
##  5 Afghanistan_1972 Afghanistan Asia       1972
##  6 Afghanistan_1977 Afghanistan Asia       1977
##  7 Afghanistan_1982 Afghanistan Asia       1982
##  8 Afghanistan_1987 Afghanistan Asia       1987
##  9 Afghanistan_1992 Afghanistan Asia       1992
## 10 Afghanistan_1997 Afghanistan Asia       1997
## # … with 1,694 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<div class="sourceCode" id="cb43"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb43-1"><a href="data-handling-with-r.html#cb43-1"></a>gapminder_right &lt;-<span class="st"> </span><span class="kw">transmute</span>(gapminder, </span>
<span id="cb43-2"><a href="data-handling-with-r.html#cb43-2"></a>                             <span class="dt">key =</span> <span class="kw">paste0</span>(country, <span class="st">&quot;_&quot;</span> , year), </span>
<span id="cb43-3"><a href="data-handling-with-r.html#cb43-3"></a>                             lifeExp, </span>
<span id="cb43-4"><a href="data-handling-with-r.html#cb43-4"></a>                             pop, </span>
<span id="cb43-5"><a href="data-handling-with-r.html#cb43-5"></a>                             gdpPercap)</span>
<span id="cb43-6"><a href="data-handling-with-r.html#cb43-6"></a>gapminder_right</span></code></pre></div>
<pre><code>## # A tibble: 1,704 × 4
##    key              lifeExp      pop gdpPercap
##    &lt;chr&gt;              &lt;dbl&gt;    &lt;dbl&gt;     &lt;dbl&gt;
##  1 Afghanistan_1952    28.8  8425333      779.
##  2 Afghanistan_1957    30.3  9240934      821.
##  3 Afghanistan_1962    32.0 10267083      853.
##  4 Afghanistan_1967    34.0 11537966      836.
##  5 Afghanistan_1972    36.1 13079460      740.
##  6 Afghanistan_1977    38.4 14880372      786.
##  7 Afghanistan_1982    39.9 12881816      978.
##  8 Afghanistan_1987    40.8 13867957      852.
##  9 Afghanistan_1992    41.7 16317921      649.
## 10 Afghanistan_1997    41.8 22227415      635.
## # … with 1,694 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>Now we can join them.</p>
<div class="sourceCode" id="cb45"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb45-1"><a href="data-handling-with-r.html#cb45-1"></a>joined_gapminder &lt;-<span class="st"> </span><span class="kw">left_join</span>(</span>
<span id="cb45-2"><a href="data-handling-with-r.html#cb45-2"></a>  gapminder_left, </span>
<span id="cb45-3"><a href="data-handling-with-r.html#cb45-3"></a>  gapminder_right, </span>
<span id="cb45-4"><a href="data-handling-with-r.html#cb45-4"></a>  <span class="dt">by =</span> <span class="st">&quot;key&quot;</span> <span class="co"># optional argument if the join variables have the same name</span></span>
<span id="cb45-5"><a href="data-handling-with-r.html#cb45-5"></a>  )</span></code></pre></div>
<div class="figure">
<img src="https://raw.githubusercontent.com/gadenbuie/tidyexplain/main/images/left-join.gif" alt="" />
<p class="caption">Left Join animation (Copyright Garrick Aden_Buie)</p>
</div>
<p>If you want more information on joins operations with <code>dplyr</code>, we recommend to read the <a href="https://www.garrickadenbuie.com/project/tidyexplain/">dedicated blogpost from Garrick Aden-Buie</a></p>
</div>
<div id="piping" class="section level2 hasAnchor">
<h2><span class="header-section-number">1.12</span> Piping<a href="data-handling-with-r.html#piping" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Piping allows to create a sequence of actions on a dataset without storing intermediate results.</p>
<p>As it can be difficult to debug piped commands for beginners, we won’t use it in this workshop.
However, its usage is very frequent so it is most likely that a beginner will encounter it in documentation or in code source publicly available.</p>
<p>The most common form <code>%&gt;%</code> is provided by the package <a href="https://magrittr.tidyverse.org/">{magrittr}</a>, which is part of the tidyverse and is a dependency of {dplyr}, so you don’t have to load it.</p>
<p>In the following example, we show how to compute the mean GDP by decade of Europeans countries using pipes to chain functions.</p>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="data-handling-with-r.html#cb46-1"></a>gapminder <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># pass the datset as the first argument</span></span>
<span id="cb46-2"><a href="data-handling-with-r.html#cb46-2"></a><span class="st">  </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># subset on European records</span></span>
<span id="cb46-3"><a href="data-handling-with-r.html#cb46-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>continent) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># remove the continent column</span></span>
<span id="cb46-4"><a href="data-handling-with-r.html#cb46-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">decade =</span> year <span class="op">-</span><span class="st"> </span>year <span class="op">%%</span><span class="st"> </span><span class="dv">10</span>, <span class="co"># compute decade</span></span>
<span id="cb46-5"><a href="data-handling-with-r.html#cb46-5"></a>         <span class="dt">GDP =</span> (gdpPercap <span class="op">*</span><span class="st"> </span>pop) <span class="op">/</span><span class="st"> </span><span class="dv">1000000</span> <span class="co"># compute GDP</span></span>
<span id="cb46-6"><a href="data-handling-with-r.html#cb46-6"></a>         ) <span class="op">%&gt;%</span><span class="st"> </span></span>
<span id="cb46-7"><a href="data-handling-with-r.html#cb46-7"></a><span class="st">  </span><span class="kw">group_by</span>(country, decade) <span class="op">%&gt;%</span><span class="st"> </span><span class="co"># grouping variables</span></span>
<span id="cb46-8"><a href="data-handling-with-r.html#cb46-8"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_GDP =</span> <span class="kw">mean</span>(GDP)) <span class="co"># compute mean GDP of the decade</span></span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;country&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 180 × 3
## # Groups:   country [30]
##    country decade mean_GDP
##    &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 Albania   1950    2461.
##  2 Albania   1960    4737.
##  3 Albania   1970    8182.
##  4 Albania   1980   10796.
##  5 Albania   1990    9627.
##  6 Albania   2000   18765.
##  7 Austria   1950   52056.
##  8 Austria   1960   85666.
##  9 Austria   1970  137585.
## 10 Austria   1980  171559.
## # … with 170 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>With R 4.1.0, the built-in piping operator <code>|&gt;</code> has been introduced:</p>
<div class="sourceCode" id="cb49"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb49-1"><a href="data-handling-with-r.html#cb49-1"></a>gapminder <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="co"># pass the datset as the first argument</span></span>
<span id="cb49-2"><a href="data-handling-with-r.html#cb49-2"></a><span class="st">  </span><span class="kw">filter</span>(continent <span class="op">==</span><span class="st"> &quot;Europe&quot;</span>) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="co"># subset on European records</span></span>
<span id="cb49-3"><a href="data-handling-with-r.html#cb49-3"></a><span class="st">  </span><span class="kw">select</span>(<span class="op">-</span>continent) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="co"># remove the continent column</span></span>
<span id="cb49-4"><a href="data-handling-with-r.html#cb49-4"></a><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">decade =</span> year <span class="op">-</span><span class="st"> </span>year <span class="op">%%</span><span class="st"> </span><span class="dv">10</span>, <span class="co"># compute decade</span></span>
<span id="cb49-5"><a href="data-handling-with-r.html#cb49-5"></a>         <span class="dt">GDP =</span> (gdpPercap <span class="op">*</span><span class="st"> </span>pop) <span class="op">/</span><span class="st"> </span><span class="dv">1000000</span> <span class="co"># compute GDP</span></span>
<span id="cb49-6"><a href="data-handling-with-r.html#cb49-6"></a>         ) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span></span>
<span id="cb49-7"><a href="data-handling-with-r.html#cb49-7"></a><span class="st">  </span><span class="kw">group_by</span>(country, decade) <span class="op">|</span><span class="er">&gt;</span><span class="st"> </span><span class="co"># grouping variables</span></span>
<span id="cb49-8"><a href="data-handling-with-r.html#cb49-8"></a><span class="st">  </span><span class="kw">summarise</span>(<span class="dt">mean_GDP =</span> <span class="kw">mean</span>(GDP)) <span class="co"># compute mean GDP of the decade</span></span></code></pre></div>
<pre><code>## `summarise()` has grouped output by &#39;country&#39;. You can override using the
## `.groups` argument.</code></pre>
<pre><code>## # A tibble: 180 × 3
## # Groups:   country [30]
##    country decade mean_GDP
##    &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 Albania   1950    2461.
##  2 Albania   1960    4737.
##  3 Albania   1970    8182.
##  4 Albania   1980   10796.
##  5 Albania   1990    9627.
##  6 Albania   2000   18765.
##  7 Austria   1950   52056.
##  8 Austria   1960   85666.
##  9 Austria   1970  137585.
## 10 Austria   1980  171559.
## # … with 170 more rows
## # ℹ Use `print(n = ...)` to see more rows</code></pre>
<p>Those two pipes operators are not equivalent so we recommend to read this <a href="https://www.r-bloggers.com/2021/05/the-new-r-pipe/">R-bloggers’ blogpost</a> on pipe’s operators.</p>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references">
<div id="ref-wickham2022Packages">
<p>Wickham, Hadley, and Jennifer Bryan. 2022. <em>R Packages</em>. 2nd ed. <a href="https://r-pkgs.org/">https://r-pkgs.org/</a>.</p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="introduction.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="rspatial.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Bakaniko/foss4g2022-getting-started-rspatial/edit/main/02-data-handling.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
