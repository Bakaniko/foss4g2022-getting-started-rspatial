<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Manipulating raster data | Getting started with R and R-spatial</title>
  <meta name="description" content="Teaching materials for R and R-spatial introduction workshop at FOSS4G2022." />
  <meta name="generator" content="bookdown 0.27 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Manipulating raster data | Getting started with R and R-spatial" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Teaching materials for R and R-spatial introduction workshop at FOSS4G2022." />
  <meta name="github-repo" content="Bakaniko/foss4g2022-getting-started-rspatial" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Manipulating raster data | Getting started with R and R-spatial" />
  
  <meta name="twitter:description" content="Teaching materials for R and R-spatial introduction workshop at FOSS4G2022." />
  

<meta name="author" content="Nicolas Roelandt and Jakub Nowosad" />


<meta name="date" content="2022-07-29" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="manipulating-vector-data.html"/>
<link rel="next" href="summary.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<script src="libs/accessible-code-block-0.0.1/empty-anchor.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.5.4/htmlwidgets.js"></script>
<link href="libs/leaflet-1.3.1/leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-1.3.1/leaflet.js"></script>
<link href="libs/leafletfix-1.0.0/leafletfix.css" rel="stylesheet" />
<script src="libs/proj4-2.6.2/proj4.min.js"></script>
<script src="libs/Proj4Leaflet-1.0.1/proj4leaflet.js"></script>
<link href="libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css" rel="stylesheet" />
<script src="libs/leaflet-binding-2.1.1/leaflet.js"></script>
<script src="libs/leaflet-providers-1.9.0/leaflet-providers_1.9.0.js"></script>
<script src="libs/leaflet-providers-plugin-2.1.1/leaflet-providers-plugin.js"></script>
<script src="libs/leaflet-graticule-0.1.0/L.Graticule.js"></script>
<script src="libs/leaflet-graticule-0.1.0/Graticule-binding.js"></script>
<link href="libs/leaflet-minimap-3.3.1/Control.MiniMap.min.css" rel="stylesheet" />
<script src="libs/leaflet-minimap-3.3.1/Control.MiniMap.min.js"></script>
<script src="libs/leaflet-minimap-3.3.1/Minimap-binding.js"></script>
<script src="libs/clipboard-0.0.1/setClipboardText.js"></script>


<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Getting started with R and R-spatial</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>About</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i>Introduction</a><ul>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#schedule"><i class="fa fa-check"></i>Schedule</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#pre-requisites"><i class="fa fa-check"></i>Pre-requisites</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#what-is-love-r"><i class="fa fa-check"></i>What is <del>love</del> R ?</a></li>
<li class="chapter" data-level="0.1" data-path="introduction.html"><a href="introduction.html#why-an-r-workshop-in-a-foss4g-conference"><i class="fa fa-check"></i><b>0.1</b> Why an R workshop in a FOSS4G conference ?</a></li>
<li class="chapter" data-level="" data-path="introduction.html"><a href="introduction.html#coding-paradigms"><i class="fa fa-check"></i>Coding paradigms</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html"><i class="fa fa-check"></i><b>1</b> Data handling with R</a><ul>
<li class="chapter" data-level="1.1" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#data-types"><i class="fa fa-check"></i><b>1.1</b> Data types</a></li>
<li class="chapter" data-level="1.2" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#assignment"><i class="fa fa-check"></i><b>1.2</b> Assignment</a></li>
<li class="chapter" data-level="1.3" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#not-only-a-calculator"><i class="fa fa-check"></i><b>1.3</b> Not only a calculator</a></li>
<li class="chapter" data-level="1.4" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#packages"><i class="fa fa-check"></i><b>1.4</b> Packages</a></li>
<li class="chapter" data-level="1.5" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#load-data"><i class="fa fa-check"></i><b>1.5</b> Load data</a></li>
<li class="chapter" data-level="1.6" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#in-the-beginning-was-the-verb"><i class="fa fa-check"></i><b>1.6</b> In the beginning was the Verb</a></li>
<li class="chapter" data-level="1.7" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#filter-data"><i class="fa fa-check"></i><b>1.7</b> Filter data</a><ul>
<li class="chapter" data-level="" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#exercice"><i class="fa fa-check"></i>Exercice</a></li>
</ul></li>
<li class="chapter" data-level="1.8" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#select-columns"><i class="fa fa-check"></i><b>1.8</b> Select columns</a></li>
<li class="chapter" data-level="1.9" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#create-new-variables"><i class="fa fa-check"></i><b>1.9</b> Create new variables</a></li>
<li class="chapter" data-level="1.10" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#agregate-data"><i class="fa fa-check"></i><b>1.10</b> Agregate data</a></li>
<li class="chapter" data-level="1.11" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#join-data"><i class="fa fa-check"></i><b>1.11</b> Join data</a></li>
<li class="chapter" data-level="1.12" data-path="data-handling-with-r.html"><a href="data-handling-with-r.html#piping"><i class="fa fa-check"></i><b>1.12</b> Piping</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="rspatial.html"><a href="rspatial.html"><i class="fa fa-check"></i><b>2</b> Introduction to the R-spatial ecosystem</a><ul>
<li class="chapter" data-level="2.1" data-path="rspatial.html"><a href="rspatial.html#r-packages---specialized-packages"><i class="fa fa-check"></i><b>2.1</b> R packages - specialized packages</a></li>
<li class="chapter" data-level="2.2" data-path="rspatial.html"><a href="rspatial.html#rs-spatial-ecosystems"><i class="fa fa-check"></i><b>2.2</b> R’s spatial ecosystem(s)</a></li>
<li class="chapter" data-level="2.3" data-path="rspatial.html"><a href="rspatial.html#vector-data"><i class="fa fa-check"></i><b>2.3</b> Vector data</a></li>
<li class="chapter" data-level="2.4" data-path="rspatial.html"><a href="rspatial.html#raster-data"><i class="fa fa-check"></i><b>2.4</b> Raster data</a><ul>
<li class="chapter" data-level="2.4.1" data-path="rspatial.html"><a href="rspatial.html#conversions"><i class="fa fa-check"></i><b>2.4.1</b> Conversions</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="3" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html"><i class="fa fa-check"></i><b>3</b> Making maps in R</a><ul>
<li class="chapter" data-level="3.1" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#mapping-tools-in-r"><i class="fa fa-check"></i><b>3.1</b> Mapping tools in R</a></li>
<li class="chapter" data-level="3.2" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#basic-example"><i class="fa fa-check"></i><b>3.2</b> Basic example</a></li>
<li class="chapter" data-level="3.3" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#shapes-and-layers"><i class="fa fa-check"></i><b>3.3</b> Shapes and layers</a></li>
<li class="chapter" data-level="3.4" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#attributes-layers"><i class="fa fa-check"></i><b>3.4</b> Attributes layers</a></li>
<li class="chapter" data-level="3.5" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#other-map-elements"><i class="fa fa-check"></i><b>3.5</b> Other map elements</a></li>
<li class="chapter" data-level="3.6" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#interactive-mode"><i class="fa fa-check"></i><b>3.6</b> Interactive mode</a></li>
<li class="chapter" data-level="3.7" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#saving-maps"><i class="fa fa-check"></i><b>3.7</b> Saving maps</a></li>
<li class="chapter" data-level="3.8" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#what-else"><i class="fa fa-check"></i><b>3.8</b> What else?</a></li>
<li class="chapter" data-level="3.9" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#more-resources"><i class="fa fa-check"></i><b>3.9</b> More resources</a></li>
<li class="chapter" data-level="3.10" data-path="making-maps-in-r.html"><a href="making-maps-in-r.html#exercises"><i class="fa fa-check"></i><b>3.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html"><i class="fa fa-check"></i><b>4</b> Manipulating vector data</a><ul>
<li class="chapter" data-level="4.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#read-spatial-data"><i class="fa fa-check"></i><b>4.1</b> Read spatial data</a><ul>
<li class="chapter" data-level="4.1.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#cycle-hire-dataset"><i class="fa fa-check"></i><b>4.1.1</b> Cycle hire dataset</a></li>
<li class="chapter" data-level="4.1.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#boroughs-of-london"><i class="fa fa-check"></i><b>4.1.2</b> Boroughs of London</a></li>
</ul></li>
<li class="chapter" data-level="4.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#reprojection"><i class="fa fa-check"></i><b>4.2</b> Reprojection</a></li>
<li class="chapter" data-level="4.3" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#joins"><i class="fa fa-check"></i><b>4.3</b> Joins</a><ul>
<li class="chapter" data-level="4.3.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#join-by-attributes"><i class="fa fa-check"></i><b>4.3.1</b> Join by attributes</a></li>
<li class="chapter" data-level="4.3.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#spatial-join"><i class="fa fa-check"></i><b>4.3.2</b> Spatial join</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#aggregation"><i class="fa fa-check"></i><b>4.4</b> Aggregation</a><ul>
<li class="chapter" data-level="4.4.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#count"><i class="fa fa-check"></i><b>4.4.1</b> Count</a></li>
<li class="chapter" data-level="4.4.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#sum"><i class="fa fa-check"></i><b>4.4.2</b> Sum</a></li>
</ul></li>
<li class="chapter" data-level="4.5" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#centroids"><i class="fa fa-check"></i><b>4.5</b> Centroids</a></li>
<li class="chapter" data-level="4.6" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#geometric-binary-predicates"><i class="fa fa-check"></i><b>4.6</b> Geometric binary predicates</a></li>
<li class="chapter" data-level="4.7" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#saving-results"><i class="fa fa-check"></i><b>4.7</b> Saving results</a><ul>
<li class="chapter" data-level="4.7.1" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#writing-data"><i class="fa fa-check"></i><b>4.7.1</b> Writing data</a></li>
<li class="chapter" data-level="4.7.2" data-path="manipulating-vector-data.html"><a href="manipulating-vector-data.html#check-data"><i class="fa fa-check"></i><b>4.7.2</b> Check data</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html"><i class="fa fa-check"></i><b>5</b> Manipulating raster data</a><ul>
<li class="chapter" data-level="5.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#example-data"><i class="fa fa-check"></i><b>5.1</b> Example data</a></li>
<li class="chapter" data-level="5.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#map-algebra"><i class="fa fa-check"></i><b>5.2</b> Map algebra</a><ul>
<li class="chapter" data-level="5.2.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#local-operations"><i class="fa fa-check"></i><b>5.2.1</b> Local operations</a></li>
<li class="chapter" data-level="5.2.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#focal-operations"><i class="fa fa-check"></i><b>5.2.2</b> Focal operations</a></li>
<li class="chapter" data-level="5.2.3" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#zonal-operations"><i class="fa fa-check"></i><b>5.2.3</b> Zonal operations</a></li>
<li class="chapter" data-level="5.2.4" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#global-operations"><i class="fa fa-check"></i><b>5.2.4</b> Global operations</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#transformations"><i class="fa fa-check"></i><b>5.3</b> Transformations</a><ul>
<li class="chapter" data-level="5.3.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#resampling"><i class="fa fa-check"></i><b>5.3.1</b> Resampling</a></li>
<li class="chapter" data-level="5.3.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#reprojecting-rasters"><i class="fa fa-check"></i><b>5.3.2</b> Reprojecting rasters</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-vector-interactions"><i class="fa fa-check"></i><b>5.4</b> Raster-vector interactions</a><ul>
<li class="chapter" data-level="5.4.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-cropping-and-masking"><i class="fa fa-check"></i><b>5.4.1</b> Raster cropping and masking</a></li>
<li class="chapter" data-level="5.4.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-extraction"><i class="fa fa-check"></i><b>5.4.2</b> Raster extraction</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-writing"><i class="fa fa-check"></i><b>5.5</b> Raster writing</a></li>
<li class="chapter" data-level="5.6" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#raster-analysis"><i class="fa fa-check"></i><b>5.6</b> Raster analysis</a><ul>
<li class="chapter" data-level="5.6.1" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#predictions"><i class="fa fa-check"></i><b>5.6.1</b> Predictions</a></li>
<li class="chapter" data-level="5.6.2" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#interpolations"><i class="fa fa-check"></i><b>5.6.2</b> Interpolations</a></li>
<li class="chapter" data-level="5.6.3" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#segmentations"><i class="fa fa-check"></i><b>5.6.3</b> Segmentations</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="manipulating-raster-data.html"><a href="manipulating-raster-data.html#exercises-1"><i class="fa fa-check"></i><b>5.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="summary.html"><a href="summary.html"><i class="fa fa-check"></i>Summary</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://roelandtn.frama.io/" target="blank">Nicolas Roelandt</a></li>
<li><a href="https://jakubnowosad.com/" target="blank">Jakub Nowosad</a></li>
<li><a href="https://github.com/rstudio/bookdown" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Getting started with R and R-spatial</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="manipulating-raster-data" class="section level1 hasAnchor">
<h1><span class="header-section-number">Chapter 5</span> Manipulating raster data<a href="manipulating-raster-data.html#manipulating-raster-data" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<!-- (Jakub) Raster data processing (45 min) -->
<p>This chapter requires the following packages:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="manipulating-raster-data.html#cb166-1"></a><span class="kw">library</span>(tmap)</span>
<span id="cb166-2"><a href="manipulating-raster-data.html#cb166-2"></a><span class="kw">library</span>(sf)</span>
<span id="cb166-3"><a href="manipulating-raster-data.html#cb166-3"></a><span class="kw">library</span>(terra)</span></code></pre></div>
<div id="example-data" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.1</span> Example data<a href="manipulating-raster-data.html#example-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We will read a few datasets for this chapter.
It includes <code>srtm.tif</code> – an elevation raster data the Zion National Park area:
<!-- [](https://geocompr.robinlovelace.net/read-write.html#raster-data-read) --></p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="manipulating-raster-data.html#cb167-1"></a>srtm_path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;raster/srtm.tif&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spDataLarge&quot;</span>)</span>
<span id="cb167-2"><a href="manipulating-raster-data.html#cb167-2"></a>srtm &lt;-<span class="st"> </span><span class="kw">rast</span>(srtm_path)</span></code></pre></div>
<p>We can quickly look at this dataset’s summary by just typing its name:</p>
<div class="sourceCode" id="cb168"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb168-1"><a href="manipulating-raster-data.html#cb168-1"></a>srtm</span></code></pre></div>
<pre><code>## class       : SpatRaster 
## dimensions  : 457, 465, 1  (nrow, ncol, nlyr)
## resolution  : 0.0008333333, 0.0008333333  (x, y)
## extent      : -113.2396, -112.8521, 37.13208, 37.51292  (xmin, xmax, ymin, ymax)
## coord. ref. : lon/lat WGS 84 (EPSG:4326) 
## source      : srtm.tif 
## name        : srtm 
## min value   : 1024 
## max value   : 2892</code></pre>
<p>We can also extract each information separately using the following functions:</p>
<div class="sourceCode" id="cb170"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb170-1"><a href="manipulating-raster-data.html#cb170-1"></a><span class="kw">ncol</span>(srtm)</span></code></pre></div>
<pre><code>## [1] 465</code></pre>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="manipulating-raster-data.html#cb172-1"></a><span class="kw">nrow</span>(srtm)</span></code></pre></div>
<pre><code>## [1] 457</code></pre>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="manipulating-raster-data.html#cb174-1"></a><span class="kw">nlyr</span>(srtm)</span></code></pre></div>
<pre><code>## [1] 1</code></pre>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="manipulating-raster-data.html#cb176-1"></a><span class="kw">res</span>(srtm)</span></code></pre></div>
<pre><code>## [1] 0.0008333333 0.0008333333</code></pre>
<div class="sourceCode" id="cb178"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb178-1"><a href="manipulating-raster-data.html#cb178-1"></a><span class="kw">ext</span>(srtm)</span></code></pre></div>
<pre><code>## SpatExtent : -113.239583212784, -112.85208321281, 37.1320834298579, 37.5129167631658 (xmin, xmax, ymin, ymax)</code></pre>
<p>Next, we can quickly look at the data with the <code>plot()</code> function…</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="manipulating-raster-data.html#cb180-1"></a><span class="kw">plot</span>(srtm)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-5-1.png" width="672" /></p>
<p>… or create more customized map with the {tmap} package:</p>
<div class="sourceCode" id="cb181"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb181-1"><a href="manipulating-raster-data.html#cb181-1"></a><span class="kw">tm_shape</span>(srtm) <span class="op">+</span></span>
<span id="cb181-2"><a href="manipulating-raster-data.html#cb181-2"></a><span class="st">  </span><span class="kw">tm_graticules</span>() <span class="op">+</span></span>
<span id="cb181-3"><a href="manipulating-raster-data.html#cb181-3"></a><span class="st">  </span><span class="kw">tm_raster</span>(<span class="dt">style =</span> <span class="st">&quot;cont&quot;</span>, </span>
<span id="cb181-4"><a href="manipulating-raster-data.html#cb181-4"></a>            <span class="dt">title =</span> <span class="st">&quot;elevation (m a.s.l)&quot;</span>,</span>
<span id="cb181-5"><a href="manipulating-raster-data.html#cb181-5"></a>            <span class="dt">palette =</span> <span class="st">&quot;-Spectral&quot;</span>) <span class="op">+</span></span>
<span id="cb181-6"><a href="manipulating-raster-data.html#cb181-6"></a><span class="st">  </span><span class="kw">tm_scale_bar</span>(<span class="dt">breaks =</span> <span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>),</span>
<span id="cb181-7"><a href="manipulating-raster-data.html#cb181-7"></a>               <span class="dt">text.size =</span> <span class="dv">1</span>) <span class="op">+</span></span>
<span id="cb181-8"><a href="manipulating-raster-data.html#cb181-8"></a><span class="st">  </span><span class="kw">tm_credits</span>(<span class="st">&quot;Jakub Nowosad, 2022&quot;</span>) <span class="op">+</span></span>
<span id="cb181-9"><a href="manipulating-raster-data.html#cb181-9"></a><span class="st">  </span><span class="kw">tm_layout</span>(<span class="dt">inner.margins =</span> <span class="dv">0</span>,</span>
<span id="cb181-10"><a href="manipulating-raster-data.html#cb181-10"></a>            <span class="dt">main.title =</span> <span class="st">&quot;Zion National Park&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-6-1.png" width="672" /></p>
<p>Additional raster dataset we use in this chapter is <code>nlcd.tif</code> – a simplified version of the National Land Cover Database 2011 product for the Zion National Park area.</p>
<div class="sourceCode" id="cb182"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb182-1"><a href="manipulating-raster-data.html#cb182-1"></a>nlcd &lt;-<span class="st"> </span><span class="kw">rast</span>(<span class="kw">system.file</span>(<span class="st">&quot;raster/nlcd.tif&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spDataLarge&quot;</span>))</span></code></pre></div>
</div>
<div id="map-algebra" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.2</span> Map algebra<a href="manipulating-raster-data.html#map-algebra" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Map algebra is used for a various task related to spatial raster data processing and analysis.</p>
<p>It can be divided into four groups of operations:</p>
<ol style="list-style-type: decimal">
<li><strong>Local</strong> - per-cell operations</li>
<li><strong>Focal</strong> - most often the output cell value is the result of a 3 x 3 input cell block</li>
<li><strong>Zonal</strong> - to summarize raster values for some zones (usually irregular areas)</li>
<li><strong>Global</strong> - to summarize raster values for one or several rasters</li>
</ol>
<div id="local-operations" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.2.1</span> Local operations<a href="manipulating-raster-data.html#local-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Numerical computations are basic examples of local operations – we can create new raster objects by, for example, adding or subtracting existing values:</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="manipulating-raster-data.html#cb183-1"></a>srtm2 &lt;-<span class="st"> </span>srtm <span class="op">+</span><span class="st"> </span><span class="dv">1000</span></span>
<span id="cb183-2"><a href="manipulating-raster-data.html#cb183-2"></a>srtm3 &lt;-<span class="st"> </span>srtm <span class="op">-</span><span class="st"> </span><span class="dv">1024</span></span>
<span id="cb183-3"><a href="manipulating-raster-data.html#cb183-3"></a>srtm4 &lt;-<span class="st"> </span>srtm <span class="op">-</span><span class="st"> </span><span class="dv">1837</span></span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-9-1.png" width="100%" /></p>
<p>Another example of local operation is when we want to replace some values.
This can be done by either <code>subst()</code> or <code>classify()</code>.
The <code>subst()</code> function is useful when we want to quickly replace some value(s).</p>
<div class="sourceCode" id="cb184"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb184-1"><a href="manipulating-raster-data.html#cb184-1"></a>srtm_new &lt;-<span class="st"> </span><span class="kw">subst</span>(srtm, <span class="dv">1500</span><span class="op">:</span><span class="dv">2000</span>, <span class="ot">NA</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-11-1.png" width="100%" /></p>
<p>On the other hand, the <code>classify()</code> function is more useful when we want to replace many values.
It requires at least two arguments – our input raster and a reclassification table.
Reclassification table is a matrix usually with two columns (old/new) or three columns (from/to/new):</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="manipulating-raster-data.html#cb185-1"></a>rcl &lt;-<span class="st"> </span><span class="kw">matrix</span>(<span class="kw">c</span>(<span class="dv">0</span>, <span class="dv">1500</span>, <span class="dv">1</span>, <span class="dv">1500</span>, <span class="dv">2000</span>, <span class="dv">2</span>, <span class="dv">2000</span>, <span class="dv">9999</span>, <span class="dv">3</span>),</span>
<span id="cb185-2"><a href="manipulating-raster-data.html#cb185-2"></a>             <span class="dt">ncol =</span> <span class="dv">3</span>, <span class="dt">byrow =</span> <span class="ot">TRUE</span>)</span>
<span id="cb185-3"><a href="manipulating-raster-data.html#cb185-3"></a>rcl</span></code></pre></div>
<pre><code>##      [,1] [,2] [,3]
## [1,]    0 1500    1
## [2,] 1500 2000    2
## [3,] 2000 9999    3</code></pre>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="manipulating-raster-data.html#cb187-1"></a>srtm_recl &lt;-<span class="st"> </span><span class="kw">classify</span>(srtm, <span class="dt">rcl =</span> rcl)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-14-1.png" width="672" /></p>
<p>The last example of local operation is useful when we have many raster layers and want to calculate, for example, spectral indices, such as NDVI.
In this case, each cell’s values are treated independently.</p>
<p>To showcase local operations on many layers, we will use the <code>landsat.tif</code> dataset.
It contains four bands (2, 3, 4, 5) of the Landsat 8 image for the area of Zion National Park.</p>
<div class="sourceCode" id="cb188"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb188-1"><a href="manipulating-raster-data.html#cb188-1"></a>landsat_path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;raster/landsat.tif&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spDataLarge&quot;</span>)</span>
<span id="cb188-2"><a href="manipulating-raster-data.html#cb188-2"></a>landsat &lt;-<span class="st"> </span><span class="kw">rast</span>(landsat_path)</span>
<span id="cb188-3"><a href="manipulating-raster-data.html#cb188-3"></a>landsat</span></code></pre></div>
<pre><code>## class       : SpatRaster 
## dimensions  : 1428, 1128, 4  (nrow, ncol, nlyr)
## resolution  : 30, 30  (x, y)
## extent      : 301905, 335745, 4111245, 4154085  (xmin, xmax, ymin, ymax)
## coord. ref. : WGS 84 / UTM zone 12N (EPSG:32612) 
## source      : landsat.tif 
## names       : landsat_1, landsat_2, landsat_3, landsat_4 
## min values  :      7550,      6404,      5678,      5252 
## max values  :     19071,     22051,     25780,     31961</code></pre>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-16-1.png" width="672" /></p>
<p><a href="https://en.wikipedia.org/wiki/Normalized_difference_vegetation_index">Normalized Difference Vegetation Index (NDVI)</a> is one of the most commonly used spectral index.
It uses values of two bands: red (3) and near-infrared (4):</p>
<p><span class="math display">\[
\begin{split}
NDVI&amp;= \frac{\text{NIR} - \text{Red}}{\text{NIR} + \text{Red}}\\
\end{split}
\]</span></p>
<p>The above equation can be rewritten as an R function that accepts two arguments, and returns a result of the calculations.</p>
<div class="sourceCode" id="cb190"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb190-1"><a href="manipulating-raster-data.html#cb190-1"></a>ndvi_fun &lt;-<span class="st"> </span><span class="cf">function</span>(nir, red){</span>
<span id="cb190-2"><a href="manipulating-raster-data.html#cb190-2"></a>  (nir <span class="op">-</span><span class="st"> </span>red) <span class="op">/</span><span class="st"> </span>(nir <span class="op">+</span><span class="st"> </span>red)</span>
<span id="cb190-3"><a href="manipulating-raster-data.html#cb190-3"></a>}</span></code></pre></div>
<p>Now, we can apply our <code>ndvi_fun()</code> to the <code>lapp()</code> function.
The only important thing we need to remember is to subset our raster to contain only the needed layers:</p>
<div class="sourceCode" id="cb191"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb191-1"><a href="manipulating-raster-data.html#cb191-1"></a>ndvi &lt;-<span class="st"> </span><span class="kw">lapp</span>(landsat[[<span class="kw">c</span>(<span class="dv">4</span>, <span class="dv">3</span>)]], <span class="dt">fun =</span> ndvi_fun)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-18-1.png" width="672" /></p>
</div>
<div id="focal-operations" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.2.2</span> Focal operations<a href="manipulating-raster-data.html#focal-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>?focal</code></p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="manipulating-raster-data.html#cb192-1"></a>srtm_focal_mean &lt;-<span class="st"> </span><span class="kw">focal</span>(srtm, </span>
<span id="cb192-2"><a href="manipulating-raster-data.html#cb192-2"></a>                   <span class="dt">w =</span> <span class="kw">matrix</span>(<span class="dv">1</span>, <span class="dt">nrow =</span> <span class="dv">3</span>, <span class="dt">ncol =</span> <span class="dv">3</span>), </span>
<span id="cb192-3"><a href="manipulating-raster-data.html#cb192-3"></a>                   <span class="dt">fun =</span> mean)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-20-1.png" width="672" /></p>
</div>
<div id="zonal-operations" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.2.3</span> Zonal operations<a href="manipulating-raster-data.html#zonal-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>?zonal</code>
Also known as zonal statistics. Result - a summary table</p>
<div class="sourceCode" id="cb193"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb193-1"><a href="manipulating-raster-data.html#cb193-1"></a>srtm_utm &lt;-<span class="st"> </span><span class="kw">project</span>(srtm, nlcd, <span class="dt">method =</span> <span class="st">&quot;bilinear&quot;</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-22-1.png" width="672" /></p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="manipulating-raster-data.html#cb194-1"></a>srtm_zonal &lt;-<span class="st"> </span><span class="kw">zonal</span>(srtm_utm, nlcd, <span class="dt">na.rm =</span> <span class="ot">TRUE</span>, <span class="dt">fun =</span> <span class="st">&quot;mean&quot;</span>)</span>
<span id="cb194-2"><a href="manipulating-raster-data.html#cb194-2"></a>srtm_zonal</span></code></pre></div>
<pre><code>##       levels     srtm
## 1      Water 2227.060
## 2  Developed 1699.510
## 3     Barren 1853.950
## 4     Forest 1996.807
## 5  Shrubland 1650.796
## 6 Herbaceous 1644.282
## 7 Cultivated 1288.272
## 8   Wetlands 1262.578</code></pre>
</div>
<div id="global-operations" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.2.4</span> Global operations<a href="manipulating-raster-data.html#global-operations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="manipulating-raster-data.html#cb196-1"></a><span class="kw">global</span>(srtm, <span class="dt">fun =</span> <span class="st">&quot;mean&quot;</span>)</span></code></pre></div>
<pre><code>##          mean
## srtm 1842.548</code></pre>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="manipulating-raster-data.html#cb198-1"></a><span class="kw">global</span>(srtm, <span class="dt">fun =</span> <span class="st">&quot;sd&quot;</span>)</span></code></pre></div>
<pre><code>##            sd
## srtm 416.6776</code></pre>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="manipulating-raster-data.html#cb200-1"></a><span class="kw">freq</span>(nlcd)</span></code></pre></div>
<pre><code>##   layer      value  count
## 1     1      Water   1209
## 2     1  Developed  17517
## 3     1     Barren 106070
## 4     1     Forest 767537
## 5     1  Shrubland 545771
## 6     1 Herbaceous   4878
## 7     1 Cultivated   8728
## 8     1   Wetlands   6497</code></pre>
<!-- - global + freq + areas (cellSize()) -->
</div>
</div>
<div id="transformations" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.3</span> Transformations<a href="manipulating-raster-data.html#transformations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="resampling" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.3.1</span> Resampling<a href="manipulating-raster-data.html#resampling" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="manipulating-raster-data.html#cb202-1"></a>srtm</span></code></pre></div>
<pre><code>## class       : SpatRaster 
## dimensions  : 457, 465, 1  (nrow, ncol, nlyr)
## resolution  : 0.0008333333, 0.0008333333  (x, y)
## extent      : -113.2396, -112.8521, 37.13208, 37.51292  (xmin, xmax, ymin, ymax)
## coord. ref. : lon/lat WGS 84 (EPSG:4326) 
## source      : srtm.tif 
## name        : srtm 
## min value   : 1024 
## max value   : 2892</code></pre>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="manipulating-raster-data.html#cb204-1"></a>new_srtm &lt;-<span class="st"> </span>srtm</span>
<span id="cb204-2"><a href="manipulating-raster-data.html#cb204-2"></a><span class="kw">res</span>(new_srtm) &lt;-<span class="st"> </span><span class="fl">0.001</span></span>
<span id="cb204-3"><a href="manipulating-raster-data.html#cb204-3"></a>new_srtm</span></code></pre></div>
<pre><code>## class       : SpatRaster 
## dimensions  : 381, 387, 1  (nrow, ncol, nlyr)
## resolution  : 0.001, 0.001  (x, y)
## extent      : -113.2396, -112.8526, 37.13208, 37.51308  (xmin, xmax, ymin, ymax)
## coord. ref. : lon/lat WGS 84 (EPSG:4326)</code></pre>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="manipulating-raster-data.html#cb206-1"></a>srtm2 &lt;-<span class="st"> </span><span class="kw">resample</span>(srtm, new_srtm, <span class="dt">method =</span> <span class="st">&quot;bilinear&quot;</span>) <span class="co"># method!</span></span>
<span id="cb206-2"><a href="manipulating-raster-data.html#cb206-2"></a>srtm2</span></code></pre></div>
<pre><code>## class       : SpatRaster 
## dimensions  : 381, 387, 1  (nrow, ncol, nlyr)
## resolution  : 0.001, 0.001  (x, y)
## extent      : -113.2396, -112.8526, 37.13208, 37.51308  (xmin, xmax, ymin, ymax)
## coord. ref. : lon/lat WGS 84 (EPSG:4326) 
## source      : memory 
## name        :    srtm 
## min value   : 1032.44 
## max value   : 2891.25</code></pre>
</div>
<div id="reprojecting-rasters" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.3.2</span> Reprojecting rasters<a href="manipulating-raster-data.html#reprojecting-rasters" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="manipulating-raster-data.html#cb208-1"></a><span class="kw">crs</span>(srtm, <span class="dt">describe =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>##     name authority code area         extent
## 1 WGS 84      EPSG 4326 &lt;NA&gt; NA, NA, NA, NA</code></pre>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="manipulating-raster-data.html#cb210-1"></a><span class="kw">hist</span>(srtm)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-30-1.png" width="672" /></p>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-31-1.png" width="672" /></p>
<p><a href="https://projectionwizard.org/" class="uri">https://projectionwizard.org/</a></p>
<div class="sourceCode" id="cb211"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb211-1"><a href="manipulating-raster-data.html#cb211-1"></a>srtm_utm &lt;-<span class="st"> </span><span class="kw">project</span>(srtm, <span class="st">&quot;EPSG:32612&quot;</span>, <span class="dt">method =</span> <span class="st">&quot;bilinear&quot;</span>)</span>
<span id="cb211-2"><a href="manipulating-raster-data.html#cb211-2"></a><span class="kw">crs</span>(srtm_utm, <span class="dt">describe =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<pre><code>##                    name authority  code
## 1 WGS 84 / UTM zone 12N      EPSG 32612
##                                                                                                                                                                                             area
## 1 Between 114°W and 108°W, northern hemisphere between equator and 84°N, onshore and offshore. Canada - Alberta; Northwest Territories (NWT); Nunavut; Saskatchewan. Mexico. United States (USA)
##              extent
## 1 -114, -108, 84, 0</code></pre>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-33-1.png" width="672" /></p>
</div>
</div>
<div id="raster-vector-interactions" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.4</span> Raster-vector interactions<a href="manipulating-raster-data.html#raster-vector-interactions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Raster cropping and masking</li>
<li>Raster extraction - by points, lines, and polygons</li>
<li>Rasterization - points, lines, polygons to rasters</li>
<li>Vectorization - rasters to polygons or contours</li>
</ul>
<div id="raster-cropping-and-masking" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.4.1</span> Raster cropping and masking<a href="manipulating-raster-data.html#raster-cropping-and-masking" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb213"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb213-1"><a href="manipulating-raster-data.html#cb213-1"></a><span class="kw">library</span>(sf)</span>
<span id="cb213-2"><a href="manipulating-raster-data.html#cb213-2"></a>zion &lt;-<span class="st"> </span><span class="kw">read_sf</span>(<span class="kw">system.file</span>(<span class="st">&quot;vector/zion.gpkg&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spDataLarge&quot;</span>))</span></code></pre></div>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="manipulating-raster-data.html#cb214-1"></a>srtm_utm_c &lt;-<span class="st"> </span><span class="kw">crop</span>(srtm_utm, <span class="kw">vect</span>(zion))</span></code></pre></div>
<p>Raster masking is usually done together with cropping.</p>
<div class="sourceCode" id="cb215"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb215-1"><a href="manipulating-raster-data.html#cb215-1"></a>srtm_utm_m &lt;-<span class="st"> </span><span class="kw">mask</span>(srtm_utm_c, <span class="kw">vect</span>(zion))</span></code></pre></div>
</div>
<div id="raster-extraction" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.4.2</span> Raster extraction<a href="manipulating-raster-data.html#raster-extraction" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="manipulating-raster-data.html#cb216-1"></a>zion_points &lt;-<span class="st"> </span><span class="kw">read_sf</span>(<span class="kw">system.file</span>(<span class="st">&quot;vector/zion_points.gpkg&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spDataLarge&quot;</span>))</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-41-1.png" width="672" /></p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="manipulating-raster-data.html#cb217-1"></a>zion_extract &lt;-<span class="st"> </span>terra<span class="op">::</span><span class="kw">extract</span>(srtm, <span class="kw">vect</span>(zion_points))</span>
<span id="cb217-2"><a href="manipulating-raster-data.html#cb217-2"></a>zion_points &lt;-<span class="st"> </span><span class="kw">cbind</span>(zion_points, zion_extract)</span>
<span id="cb217-3"><a href="manipulating-raster-data.html#cb217-3"></a>zion_points</span></code></pre></div>
<pre><code>## Simple feature collection with 30 features and 2 fields
## Geometry type: POINT
## Dimension:     XY
## Bounding box:  xmin: -113.2077 ymin: 37.16632 xmax: -112.8717 ymax: 37.43165
## Geodetic CRS:  WGS 84
## First 10 features:
##    ID srtm                       geom
## 1   1 1802 POINT (-112.9159 37.20013)
## 2   2 2433 POINT (-113.0937 37.39263)
## 3   3 1886 POINT (-113.0246 37.33466)
## 4   4 1370 POINT (-112.9611 37.24326)
## 5   5 1452 POINT (-112.9898 37.20847)
## 6   6 1635 POINT (-112.8807 37.19319)
## 7   7 1380 POINT (-113.0505 37.24061)
## 8   8 2032 POINT (-113.0953 37.34965)
## 9   9 1830 POINT (-113.0362 37.31429)
## 10 10 1860 POINT (-113.2077 37.43165)</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="manipulating-raster-data.html#cb219-1"></a>zion &lt;-<span class="st"> </span><span class="kw">read_sf</span>(<span class="kw">system.file</span>(<span class="st">&quot;vector/zion.gpkg&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spDataLarge&quot;</span>))</span>
<span id="cb219-2"><a href="manipulating-raster-data.html#cb219-2"></a>zion &lt;-<span class="st"> </span><span class="kw">st_transform</span>(zion, <span class="kw">crs</span>(srtm))</span>
<span id="cb219-3"><a href="manipulating-raster-data.html#cb219-3"></a>zion_srtm_values &lt;-<span class="st"> </span>terra<span class="op">::</span><span class="kw">extract</span>(srtm, <span class="kw">vect</span>(zion))</span></code></pre></div>
<div class="sourceCode" id="cb220"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb220-1"><a href="manipulating-raster-data.html#cb220-1"></a><span class="kw">head</span>(zion_srtm_values)</span></code></pre></div>
<pre><code>##   ID srtm
## 1  1 1666
## 2  1 1677
## 3  1 1708
## 4  1 1735
## 5  1 1751
## 6  1 1770</code></pre>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-45-1.png" width="672" /></p>
<div class="sourceCode" id="cb222"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb222-1"><a href="manipulating-raster-data.html#cb222-1"></a>zion_srtm_values &lt;-<span class="st"> </span>terra<span class="op">::</span><span class="kw">extract</span>(srtm, <span class="kw">vect</span>(zion))</span></code></pre></div>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="manipulating-raster-data.html#cb223-1"></a><span class="kw">library</span>(dplyr)</span>
<span id="cb223-2"><a href="manipulating-raster-data.html#cb223-2"></a>zion_srtm_values <span class="op">|</span><span class="er">&gt;</span></span>
<span id="cb223-3"><a href="manipulating-raster-data.html#cb223-3"></a><span class="st">  </span><span class="kw">group_by</span>(ID) <span class="op">|</span><span class="er">&gt;</span></span>
<span id="cb223-4"><a href="manipulating-raster-data.html#cb223-4"></a><span class="st">  </span><span class="kw">summarize</span>(<span class="kw">across</span>(srtm, <span class="kw">list</span>(<span class="dt">min =</span> min, <span class="dt">mean =</span> mean, <span class="dt">max =</span> max)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##      ID srtm_min srtm_mean srtm_max
##   &lt;dbl&gt;    &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
## 1     1     1122     1818.     2661</code></pre>
<!-- exact = TRUE -->
</div>
</div>
<div id="raster-writing" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.5</span> Raster writing<a href="manipulating-raster-data.html#raster-writing" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><a href="https://geocompr.robinlovelace.net/read-write.html#data-output" class="uri">https://geocompr.robinlovelace.net/read-write.html#data-output</a></li>
<li><a href="https://gdal.org/drivers/raster/gtiff.html" class="uri">https://gdal.org/drivers/raster/gtiff.html</a></li>
</ul>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="manipulating-raster-data.html#cb225-1"></a><span class="kw">writeRaster</span>(nlcd, <span class="dt">filename =</span> <span class="st">&quot;nlcd1.tif&quot;</span>, <span class="dt">gdal =</span> <span class="kw">c</span>(<span class="st">&quot;COMPRESS=NONE&quot;</span>))</span>
<span id="cb225-2"><a href="manipulating-raster-data.html#cb225-2"></a><span class="kw">writeRaster</span>(nlcd, <span class="dt">filename =</span> <span class="st">&quot;nlcd2.tif&quot;</span>, <span class="dt">datatype =</span> <span class="st">&quot;INT1U&quot;</span>)</span>
<span id="cb225-3"><a href="manipulating-raster-data.html#cb225-3"></a><span class="kw">writeRaster</span>(nlcd, <span class="dt">filename =</span> <span class="st">&quot;nlcd3.tif&quot;</span>, <span class="dt">filetype =</span> <span class="st">&quot;COG&quot;</span>)</span></code></pre></div>
</div>
<div id="raster-analysis" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.6</span> Raster analysis<a href="manipulating-raster-data.html#raster-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="predictions" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.6.1</span> Predictions<a href="manipulating-raster-data.html#predictions" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb226"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb226-1"><a href="manipulating-raster-data.html#cb226-1"></a>landsat_path &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;raster/landsat.tif&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;spDataLarge&quot;</span>)</span>
<span id="cb226-2"><a href="manipulating-raster-data.html#cb226-2"></a>landsat &lt;-<span class="st"> </span><span class="kw">rast</span>(landsat_path)</span>
<span id="cb226-3"><a href="manipulating-raster-data.html#cb226-3"></a>zion_points_utm &lt;-<span class="st"> </span><span class="kw">st_transform</span>(zion_points, <span class="dt">crs =</span> <span class="kw">crs</span>(landsat))</span>
<span id="cb226-4"><a href="manipulating-raster-data.html#cb226-4"></a>landsat_s &lt;-<span class="st"> </span><span class="kw">stretch</span>(landsat, <span class="dt">maxq =</span> <span class="fl">0.98</span>)</span>
<span id="cb226-5"><a href="manipulating-raster-data.html#cb226-5"></a><span class="kw">plotRGB</span>(landsat_s, <span class="dt">r =</span> <span class="dv">3</span>, <span class="dt">g =</span> <span class="dv">2</span>, <span class="dt">b =</span> <span class="dv">1</span>)</span>
<span id="cb226-6"><a href="manipulating-raster-data.html#cb226-6"></a><span class="kw">plot</span>(<span class="kw">st_geometry</span>(zion_points_utm), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> <span class="st">&quot;red&quot;</span>, <span class="dt">cex =</span> <span class="dv">3</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-49-1.png" width="672" /></p>
<p><code>?predict</code> - <code>glm</code>, <code>randomForest</code>, <code>prcomp</code></p>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="manipulating-raster-data.html#cb227-1"></a>zion_points_utm_v &lt;-<span class="st"> </span><span class="kw">extract</span>(landsat_s, <span class="kw">vect</span>(zion_points_utm))</span>
<span id="cb227-2"><a href="manipulating-raster-data.html#cb227-2"></a>pca &lt;-<span class="st"> </span><span class="kw">prcomp</span>(zion_points_utm_v[<span class="op">-</span><span class="dv">1</span>])</span>
<span id="cb227-3"><a href="manipulating-raster-data.html#cb227-3"></a>pca</span></code></pre></div>
<pre><code>## Standard deviations (1, .., p=4):
## [1] 83.689718 24.939305  9.388554  3.530974
## 
## Rotation (n x k) = (4 x 4):
##                  PC1         PC2         PC3        PC4
## landsat_1 -0.5080760  0.20402128 -0.68068384 -0.4867274
## landsat_2 -0.5321682  0.07684548 -0.17022642  0.8257813
## landsat_3 -0.5783656  0.31318090  0.70849728 -0.2558175
## landsat_4 -0.3523479 -0.92433101  0.07565763 -0.1254554</code></pre>
<p><code>?predict</code> - <code>glm</code>, <code>randomForest</code>, <code>prcomp</code></p>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="manipulating-raster-data.html#cb229-1"></a>pca_pred &lt;-<span class="st"> </span><span class="kw">predict</span>(landsat_s, pca)</span>
<span id="cb229-2"><a href="manipulating-raster-data.html#cb229-2"></a><span class="kw">plot</span>(pca_pred)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-51-1.png" width="672" /></p>
</div>
<div id="interpolations" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.6.2</span> Interpolations<a href="manipulating-raster-data.html#interpolations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><code>?interpolate</code></p>
<div class="sourceCode" id="cb230"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb230-1"><a href="manipulating-raster-data.html#cb230-1"></a>zion_points_srtm &lt;-<span class="st"> </span><span class="kw">extract</span>(srtm_utm, <span class="kw">vect</span>(zion_points_utm))</span></code></pre></div>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="manipulating-raster-data.html#cb231-1"></a><span class="kw">library</span>(fields)</span>
<span id="cb231-2"><a href="manipulating-raster-data.html#cb231-2"></a>tps &lt;-<span class="st"> </span><span class="kw">Tps</span>(<span class="kw">st_coordinates</span>(zion_points_utm),</span>
<span id="cb231-3"><a href="manipulating-raster-data.html#cb231-3"></a>          zion_points_utm<span class="op">$</span>srtm)</span>
<span id="cb231-4"><a href="manipulating-raster-data.html#cb231-4"></a>rt &lt;-<span class="st"> </span><span class="kw">rast</span>(srtm_utm)</span>
<span id="cb231-5"><a href="manipulating-raster-data.html#cb231-5"></a>interp1 &lt;-<span class="st"> </span><span class="kw">interpolate</span>(rt, tps)</span></code></pre></div>
<div class="sourceCode" id="cb232"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb232-1"><a href="manipulating-raster-data.html#cb232-1"></a><span class="kw">plot</span>(interp1)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-54-1.png" width="672" /></p>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="manipulating-raster-data.html#cb233-1"></a><span class="kw">library</span>(gstat)</span>
<span id="cb233-2"><a href="manipulating-raster-data.html#cb233-2"></a>interpolate_gstat &lt;-<span class="st"> </span><span class="cf">function</span>(model, x, crs, ...) {</span>
<span id="cb233-3"><a href="manipulating-raster-data.html#cb233-3"></a>    v =<span class="st"> </span><span class="kw">st_as_sf</span>(x, <span class="dt">coords =</span> <span class="kw">c</span>(<span class="st">&quot;x&quot;</span>, <span class="st">&quot;y&quot;</span>), <span class="dt">crs =</span> crs)</span>
<span id="cb233-4"><a href="manipulating-raster-data.html#cb233-4"></a>    p =<span class="st"> </span><span class="kw">predict</span>(model, v, ...)</span>
<span id="cb233-5"><a href="manipulating-raster-data.html#cb233-5"></a>    <span class="kw">as.data.frame</span>(p)[, <span class="dv">1</span><span class="op">:</span><span class="dv">2</span>]</span>
<span id="cb233-6"><a href="manipulating-raster-data.html#cb233-6"></a>}</span></code></pre></div>
<div class="sourceCode" id="cb234"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb234-1"><a href="manipulating-raster-data.html#cb234-1"></a>v &lt;-<span class="st"> </span><span class="kw">variogram</span>(srtm <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, <span class="dt">data =</span> zion_points_utm)</span>
<span id="cb234-2"><a href="manipulating-raster-data.html#cb234-2"></a><span class="co"># plot(v)</span></span>
<span id="cb234-3"><a href="manipulating-raster-data.html#cb234-3"></a>mv &lt;-<span class="st"> </span><span class="kw">fit.variogram</span>(v, <span class="kw">vgm</span>(<span class="dv">120000</span>, <span class="st">&quot;Exp&quot;</span>, <span class="dv">12000</span>, <span class="dt">nugget =</span> <span class="dv">10000</span>))</span></code></pre></div>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="manipulating-raster-data.html#cb235-1"></a><span class="kw">plot</span>(v, <span class="dt">model =</span> mv)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-57-1.png" width="672" /></p>
<div class="sourceCode" id="cb236"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb236-1"><a href="manipulating-raster-data.html#cb236-1"></a>g_OK &lt;-<span class="st"> </span><span class="kw">gstat</span>(<span class="ot">NULL</span>, <span class="st">&quot;srtm&quot;</span>, srtm <span class="op">~</span><span class="st"> </span><span class="dv">1</span>, zion_points_utm, <span class="dt">model =</span> mv)</span>
<span id="cb236-2"><a href="manipulating-raster-data.html#cb236-2"></a>OK &lt;-<span class="st"> </span><span class="kw">interpolate</span>(rt, g_OK, <span class="dt">debug.level =</span> <span class="dv">0</span>, <span class="dt">fun =</span> interpolate_gstat,</span>
<span id="cb236-3"><a href="manipulating-raster-data.html#cb236-3"></a>                 <span class="dt">crs =</span> <span class="kw">crs</span>(rt), <span class="dt">index =</span> <span class="dv">1</span>)</span>
<span id="cb236-4"><a href="manipulating-raster-data.html#cb236-4"></a><span class="kw">plot</span>(OK)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-58-1.png" width="672" /></p>
</div>
<div id="segmentations" class="section level3 hasAnchor">
<h3><span class="header-section-number">5.6.3</span> Segmentations<a href="manipulating-raster-data.html#segmentations" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><a href="https://github.com/Nowosad/supercells" class="uri">https://github.com/Nowosad/supercells</a></p>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="manipulating-raster-data.html#cb237-1"></a><span class="kw">library</span>(supercells)</span>
<span id="cb237-2"><a href="manipulating-raster-data.html#cb237-2"></a>ortho &lt;-<span class="st"> </span><span class="kw">rast</span>(<span class="kw">system.file</span>(<span class="st">&quot;raster/ortho.tif&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;supercells&quot;</span>))</span>
<span id="cb237-3"><a href="manipulating-raster-data.html#cb237-3"></a><span class="kw">plot</span>(ortho)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-59-1.png" width="672" /></p>
<div class="sourceCode" id="cb238"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb238-1"><a href="manipulating-raster-data.html#cb238-1"></a>ortho_slic1 &lt;-<span class="st"> </span><span class="kw">supercells</span>(ortho, <span class="dt">k =</span> <span class="dv">200</span>, <span class="dt">compactness =</span> <span class="dv">10</span>)</span>
<span id="cb238-2"><a href="manipulating-raster-data.html#cb238-2"></a><span class="kw">plot</span>(ortho)</span>
<span id="cb238-3"><a href="manipulating-raster-data.html#cb238-3"></a><span class="kw">plot</span>(<span class="kw">st_geometry</span>(ortho_slic1), <span class="dt">add =</span> <span class="ot">TRUE</span>)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-60-1.png" width="672" /></p>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="manipulating-raster-data.html#cb239-1"></a>rgb_to_hex &lt;-<span class="st"> </span><span class="cf">function</span>(x){</span>
<span id="cb239-2"><a href="manipulating-raster-data.html#cb239-2"></a>  <span class="kw">apply</span>(<span class="kw">t</span>(x), <span class="dv">2</span>, <span class="cf">function</span>(x) <span class="kw">rgb</span>(x[<span class="dv">1</span>], x[<span class="dv">2</span>], x[<span class="dv">3</span>], <span class="dt">maxColorValue =</span> <span class="dv">255</span>))</span>
<span id="cb239-3"><a href="manipulating-raster-data.html#cb239-3"></a>}</span>
<span id="cb239-4"><a href="manipulating-raster-data.html#cb239-4"></a>avg_colors &lt;-<span class="st"> </span><span class="kw">rgb_to_hex</span>(<span class="kw">st_drop_geometry</span>(ortho_slic1[<span class="dv">4</span><span class="op">:</span><span class="dv">6</span>]))</span>
<span id="cb239-5"><a href="manipulating-raster-data.html#cb239-5"></a></span>
<span id="cb239-6"><a href="manipulating-raster-data.html#cb239-6"></a><span class="kw">plot</span>(ortho)</span>
<span id="cb239-7"><a href="manipulating-raster-data.html#cb239-7"></a><span class="kw">plot</span>(<span class="kw">st_geometry</span>(ortho_slic1), <span class="dt">add =</span> <span class="ot">TRUE</span>, <span class="dt">col =</span> avg_colors)</span></code></pre></div>
<p><img src="_main_files/figure-html/06-manipulating-raster-data-61-1.png" width="672" /></p>
</div>
</div>
<div id="exercises-1" class="section level2 hasAnchor">
<h2><span class="header-section-number">5.7</span> Exercises<a href="manipulating-raster-data.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!-- try hillshade -->
<!-- create a map of nlcd -->
<!-- https://bleutner.github.io/RStoolbox/rstbx-docu/spectralIndices.html -->

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="manipulating-vector-data.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="summary.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/Bakaniko/foss4g2022-getting-started-rspatial/edit/main/06-manipulating-raster-data.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["_main.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
